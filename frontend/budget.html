<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Budget</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="./css/style.css" />


  </head>

  <body>
    <div class="dashboard">
      <aside class="sidebar">
        <div class="budget_name">My Budget</div>
        <div>
          <div class="balance">Menu</div>
        </div>
        <nav class="nav">
          <a onclick="location.href='/dashboard.html';">Dashboard</a>
          <a class="active" onclick="location.href='/budget.html';">Budget</a>
          <a onclick="location.href='/income.html';">Income</a>
          <a onclick="location.href='/expenses.html';">Expenses</a>
          <a onclick="location.href='/chart.html';">Charts</a>
          <a onclick="location.href='/categories.html';">Categories</a>
          <a onclick="location.href='/saving-goals.html';">Saving Goals</a>
          <a onclick="location.href='/upcoming-payments.html';">Upcoming Payments</a>
          <a onclick="location.href='/account.html';">Settings</a>
        </nav>
      </aside>

      <main class="main">
        <div class="budget-header">
          <div class="header-left">
            <h1>Budget</h1>
            <div class="muted small" id="current-month-label"></div>
          </div>
          <div class="header-right">
            <button class="export-btn" id="exportCsvBtn">
              <i class="fas fa-download"></i> Export CSV
            </button>
          </div>
        </div>

        <!-- Top summary -->
        <div class="budget-grid" id="budget-summary-grid">
          <div class="card budget-card">
            <div class="budget-card-header">
              <div class="budget-card-title">Total Income</div>
            </div>
            <div class="budget-card-amount" id="total-income">$0.00</div>
            <div class="budget-card-subtitle">This month</div>
          </div>

          <div class="card budget-card">
            <div class="budget-card-header">
              <div class="budget-card-title">Total Expenses</div>
            </div>
            <div class="budget-card-amount" id="total-expenses">$0.00</div>
            <div class="budget-card-subtitle">This month</div>
          </div>

          <div class="card budget-card">
            <div class="budget-card-header">
              <div class="budget-card-title">Remaining</div>
            </div>
            <div class="budget-card-amount" id="remaining">$0.00</div>
            <div class="budget-card-subtitle">Income − Expenses</div>
          </div>

          <div class="card savings-card" id="allocation-card">
            <div class="savings-header">
              <div class="bank-name">Allocation</div>
              <div class="savings-date" id="allocation-date"></div>
            </div>
            <div class="savings-amount" id="allocation-amount">$0.00</div>
            <div class="savings-change">
              <div class="change-positive" id="allocation-change">+0</div>
              <div>Monthly Budget Allocation</div>
            </div>
          </div>
        </div>

        <div class="main-content">
          <div class="left-column">
            <div class="chart-container">
              <div class="chart-header">
                <div class="time-filters">
                  <button class="filter-btn active" data-range="month">
                    Monthly
                  </button>
                  <button class="filter-btn" data-range="3month">3 months</button>
                  <button class="filter-btn" data-range="year">Year</button>
                </div>
              </div>

              <div style="display:flex; gap:18px; align-items:stretch; flex-wrap:wrap;">
                <div style="flex:1; min-width:280px;">
                  <canvas id="categoryDonut"></canvas>
                </div>
                <div style="flex:2; min-width:320px;">
                  <canvas id="monthlyLine"></canvas>
                </div>
              </div>
            </div>

            <div class="stats-grid">
              <div class="stat-card">
                <div class="budget-card-subtitle">Monthly</div>
                <div class="budget-card-title" id="stat-month-label">—</div>
                <div class="stat-value" id="stat-month-budget">$—</div>
                <div class="budget-card-subtitle">Budget</div>
              </div>

              <div class="stat-card">
                <div class="budget-card-subtitle">Expected</div>
                <div class="budget-card-title">Remaining</div>
                <div class="stat-value" id="stat-expected-remaining">$—</div>
                <div class="budget-card-subtitle">Spendable</div>
              </div>

              <div class="stat-card">
                <div class="budget-card-subtitle">Running Budget</div>
                <div class="budget-card-title">Today</div>
                <div class="stat-value" id="stat-today">$—</div>
                <div class="budget-card-subtitle">The amount that can be spent</div>
              </div>
            </div>
          </div>

          <div class="right-column">
            <div class="budget-category">
              <h3 style="margin-bottom: 16px">Budget Category</h3>
              <div class="category-header">
                <div></div>
                <div>Category</div>
                <div>Budget</div>
                <div>Spent</div>
                <div>Remaining</div>
                <div>Status</div>
              </div>

              <div id="categoriesContainer">
                <!-- rendered rows here -->
              </div>

              <div style="margin-top:16px;">
                <button id="addCategoryBudgetBtn" class="export-btn">
                  <i class="fas fa-edit"></i> Save budgets (local)
                </button>
                <button id="resetBudgetsBtn" class="export-btn" style="margin-left:8px;">
                  Reset budgets
                </button>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./scripts/budget.js"></script>
  </body>
</html>
